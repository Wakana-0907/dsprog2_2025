-- 地域情報を保存するテーブル
CREATE TABLE IF NOT EXISTS areas (
    code TEXT PRIMARY KEY,       -- 気象庁のエリアコード
    name TEXT NOT NULL           -- 地域名
);

-- 天気予報データを保存するテーブル
CREATE TABLE IF NOT EXISTS weather_data (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    area_code TEXT,
    target_date TEXT,            -- 予報対象日 (YYYY-MM-DD)
    weather_name TEXT,           -- 天気名
    weather_code TEXT,           -- アイコン判定用コード
    temp_max INTEGER,            -- 最高気温
    temp_min INTEGER,            -- 最低気温
    pop INTEGER,                 -- 降水確率
    report_datetime TEXT,        -- 予報の発表時刻（過去データとの比較用）
    FOREIGN KEY (area_code) REFERENCES areas(code),
    UNIQUE(area_code, target_date) -- 同じ場所・同じ日のデータ重複を防ぐ
);